<div class="container mt-5 d-flex justify-content-center">
  <!-- Register Form Card -->
  <div class="card p-4 shadow-sm" style="width: 500px;">
    <h2 class="card-title text-center mb-4">Admin Service</h2>

    <form #registerForm="ngForm" (ngSubmit)="registerAdmin(registerForm)">
      
      <!-- Name -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Name</label>
        <input
          type="text"
          class="form-control form-control-lg"
          required
          name="name"
          [(ngModel)]="adminToUpdate.name"
          #nameModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="nameModel.invalid && nameModel.touched">
          Name is required
        </div>
      </div>

      <!-- Email -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Email</label>
        <input
          type="email"
          class="form-control form-control-lg"
          required
          name="email"
          [(ngModel)]="adminToUpdate.email"
          #emailModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="emailModel.invalid && emailModel.touched">
          Valid email is required
        </div>
      </div>

      <!-- Password -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Password</label>
        <input
          type="password"
          class="form-control form-control-lg"
          required
          name="password"
          [(ngModel)]="adminToUpdate.password"
          #passwordModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="passwordModel.invalid && passwordModel.touched">
          Password is required
        </div>
      </div>

      <!-- Role -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Role</label>
        <input
          type="text"
          class="form-control form-control-lg"
          required
          name="role"
          [(ngModel)]="adminToUpdate.role"
          #roleModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="roleModel.invalid && roleModel.touched">
          Role is required
        </div>
      </div>

      <!-- Phone Number -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Phone Number</label>
        <input
          type="text"
          class="form-control form-control-lg"
          required
          name="phoneNumber"
          [(ngModel)]="adminToUpdate.phoneNumber"
          #phoneModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="phoneModel.invalid && phoneModel.touched">
          Phone number is required
        </div>
      </div>

      <!-- Department -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Department</label>
        <input
          type="text"
          class="form-control form-control-lg"
          required
          name="department"
          [(ngModel)]="adminToUpdate.department"
          #deptModel="ngModel"
        />
        <div class="text-danger mt-1" *ngIf="deptModel.invalid && deptModel.touched">
          Department is required
        </div>
      </div>

      <!-- Active Status -->
      <div class="mb-4">
        <label class="form-label fw-bold fs-6">Active Status</label>
        <select
          class="form-control form-control-lg"
          name="activeStatus"
          [(ngModel)]="adminToUpdate.activeStatus"
        >
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>
      </div>

      <div class="text-center">
        <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="registerForm.invalid">
          Register Admin
        </button>
      </div>
    </form>
  </div>
</div>

<hr class="my-5" />

<!-- Admin List Table -->
<div class="table-responsive mt-4">
  <table class="table table-striped align-middle text-center">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Phone</th>
        <th>Department</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let admin of adminDetails">
        <td>{{ admin.id }}</td>
        <td>{{ admin.name }}</td>
        <td>{{ admin.email }}</td>
        <td>{{ admin.role }}</td>
        <td>{{ admin.phoneNumber }}</td>
        <td>{{ admin.department }}</td>
        <td>{{ admin.activeStatus }}</td>

        <td>
          <button class="btn btn-warning btn-sm me-2" (click)="edit(admin)">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteAdmin(admin)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Update Admin Modal Overlay -->
<div *ngIf="adminToUpdate.id" class="update-overlay">
  <div class="update-card p-4 border border-light rounded shadow-sm">
    <h2 class="mb-4 text-center">Update Admin</h2>

    <form #updateForm="ngForm" (ngSubmit)="updateAdmin()">

      <div class="mb-3">
        <label class="form-label">Name</label>
        <input type="text" class="form-control" required [(ngModel)]="adminToUpdate.name" name="name" />
      </div>

      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" required [(ngModel)]="adminToUpdate.email" name="email" />
      </div>

      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" class="form-control" required [(ngModel)]="adminToUpdate.password" name="password" />
      </div>

      <div class="mb-3">
        <label class="form-label">Role</label>
        <input type="text" class="form-control" required [(ngModel)]="adminToUpdate.role" name="role" />
      </div>

      <div class="mb-3">
        <label class="form-label">Phone Number</label>
        <input type="text" class="form-control" required [(ngModel)]="adminToUpdate.phoneNumber" name="phoneNumber" />
      </div>

      <div class="mb-3">
        <label class="form-label">Department</label>
        <input type="text" class="form-control" required [(ngModel)]="adminToUpdate.department" name="department" />
      </div>

      <div class="mb-3">
        <label class="form-label">Active Status</label>
        <select class="form-control" [(ngModel)]="adminToUpdate.activeStatus" name="activeStatus">
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>
      </div>

      <div class="d-flex justify-content-center gap-2 mt-3">
        <button type="submit" class="btn btn-success btn-sm w-25">Update</button>
        <button type="button" class="btn btn-secondary btn-sm w-25"
          (click)="adminToUpdate = { id: null, name: '', email: '', password: '', role: '', phoneNumber: '', department: '', activeStatus: 'Active' }">
          Cancel
        </button>
      </div>

    </form>
  </div>
</div>
